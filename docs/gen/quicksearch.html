<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Modules DataFiltersGalleryMapNavigationProgramPageReadMoreTilesNb.Main Global Global Members Navigation Navigation Navigation List × Search results Close Documentation generated by JSDoc 3.4.2 on November 7th 2016, 10:19:29 am using the DocStrap template. "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Documentation Modules DataFiltersGalleryMapNavigationProgramPageReadMoreTilesNb.Main Global Modules × Search results Close Documentation generated by JSDoc 3.4.2 on November 7th 2016, 10:19:29 am using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Modules DataFiltersGalleryMapNavigationProgramPageReadMoreTilesNb.Main Global Nuit Blanche Documentation This is the JS documentation for nbto.com. Will also list any MODX issues we come across. staging.nuitblancheto.ca testing.scotiabanknuitblanche.ca Please refer to supplied Word Document for all usernames/passwords Getting Envirnonment Set Up Installing/Downloading neccessary files The code that we upload to the server for NB is not the code we manually edit. We edit src files and use the task-runner Gulp to actually build out and create the files that we then put onto the server. We also have a BitBucket repository where we store all the source files for version control. Install Node for Windows. This will also install NPM. Install Git if you don’t already have it. Add the ‘git’ variable into your PATH so we can use the command from anywhere. We usually don’t install NPM packages globally, but for Gulp, we want to be able to access it anywhere, since it will be used in pretty much all projects. Open up your Node.js command prompt (should also be installed with Node) and type: npm install -g gulp npm install -g gulpjs/gulp-cli#4.0 (This needs git to work, the gulp 4.0 compatible command line, we use gulp 4 in the local project folder for NB, even though we install gulp 3 globally) If the above command doesn’t work try this npm install -g gulp-cli Pull the latest src files from the BitBucket repository into your working directory. git@bitbucket.org:kevin_wong__/nuitblanchegulp.git Once the src files are cloned into your working local directory, type npm install to install all the dependencies we need for this project to build properly. After this is done you should see a new folder called 'node_modules' in your directory. NOTE: You need to use the Command Prompt with Node that you installed in step one. It is important to note that the CSS is built using SASS and the JS is built using the CommonJS module syntax as well as Javascript ES6 syntax where needed/possible. Gulp Commands When you have finished the above steps, you are ready to start making edits to the source code. Since we use gulp as our build tool, we have set up a few gulp tasks to make things easier to generate the files needed for the server. You can use them by typing gulp {task} where task is a task defined in the gulpfile.js. There are a few of them: dev:scripts - packages together all js files for staging. (sourcemaps and unminified) dev:styles - packages together all css files into one css file. (sourcemaps and unmimified) dev - runs both dev:scripts and dev:styles dev:watch - runs the dev task first, then watches for any changes (certain files that are specifically set in the gulpfile, basically all JS and CSS src files) and re-runs the dev task if changes are made to any of these files. This one is likely to be used the most so you don't have to keep manually running tasks when you make any kind of edit. prod:scripts - packages together all js files for prod (no sourcemaps, uglified and minified) prod:styles - packages together all css files into one file (no sourcemaps, minified) prod - runs both prod:scripts and prod:styles doc - runs JSDoc functionality to rebuild documentation package So for example one full gulp command would be gulp dev:styles, which will run the task dev:styles and build out the CSS for our staging and testing websites. Pushing Code onto the server After any gulp command that generates code (EX: not gulp doc), you will notice a dist folder in your working directory. This folder will have two folders inside stg or prod. Choose prod if you just built prod and need to push the code live, choose stg if you just build dev and are planning to push the code to local/test/stg. These folders won't appear until you run a task that builds to them. Inside these folders will be two folders; scripts and styles. This is where you will find your built out JS or CSS files respectively. Push them to the following areas of the NB server: JS: $SITE_ROOT/svn/Web/release/assets/js/ CSS: $SITE_ROOT/svn/Web/release/assets/style/ Notes about the MODX set-up jsNeeded and page_id Global Variable In MODX, we set two global variables for the JS to use. One is simply the page_id the user is on. It is located in the Web_Common_Head and Mobile_Common_Head chunks. The code looks like this: var page_id = [[*id]]; jsNeeded is built with a snippet called insertJSinHead. The snippet takes the value of the template variable Web_Content_JS_Includes (which is included on all templates). The TV is manipulated and added as a JS object into the head of the HTML document. var jsNeeded = {&quot;tiles&quot;:true,&quot;readmore&quot;:true}; These are now global JS variables that the Snb.Main.js file uses to launch the JS needed for that particular page. Page ID is needed if the page needs to grab the Project Data JSON object (since the return data varies based on which page is calling it. Static Map Markers Static map markers are found in the desktop Project Api for Event Map resource (ID 279) in the MODX manager. If you flip over to the Template Variables tab you will see a MIGX of all the static markers appearing on the event map. Project Data JSON The Project Api for Event Map resource (ID 279 - web context, ID 299 for mobile context) each calls the snippet getProjectsJson (uncached) and returns the result to the JS. The snippet has some hard coded definitions: define(&quot;SPONSOR_PROJECT&quot;, 38); - Sponsor Project id define(&quot;COMMISSIONED_PROJECT&quot;, 36); - Commissioned Project id define(&quot;MAJOR_INSTITUTIONS&quot;, 34); - Major Institutions Project id define(&quot;INDEPENDENT_PROJECT&quot;, 32); - Independant Project id define(&quot;SITE_PATH&quot;, '/var/www/www.scotiabanknuitblanche.ca/web/public/'); - Path to web public folder A bunch of internal functions exist inside that are pulled from the code in the Project portal (how to correctly display artist etc). Some are created specifically for the data (info window content). These functions take the data from the snbproject_projects table and breaks them out into returnable fields that the JS can then use. A switch statement determines what info to collect (setting the filters needed when calling the DB). The call to the DB is made to get all projects where status_id = 1 (active) and if we need to filter by type and zone that is done as well. Then a loop is created that adds the info for each project we need into an output array and sorts by map number. If static markers are needed they get added at the end as well. When the output array is finished it returns the array but inside a json_encode function to the return is valid JSON. Turn off sessions night of event In 2016, the site was failing (returning a 500 error) under heavy load. It appears to be something that has to do with the MODX session table being overloaded, and not accepting new sessions, causing the page to crash. When you enter a MODX website, logged in or not, MODX gives your user a session and a group (anonymous). Since 99% of users don't actually need a session (only the portal users need sessions), our solution was to turn off sessions on the night of the event. The portal should be 100% ready to go by night of and if a change is needed you can turn on sessions for a limited amount of time (not reccommended however). Mobile context sessions are not needed and can be left off throughtout the year, Manager context sessions are always needed and always left on (never enough users logged in to cause the issues as above). Log into the Manager, and head to Context Settings. Right click web context, and click &quot;Update Context&quot; Click to &quot;Context Settings&quot; tab and change the 'session_enabled' value to 'No'. Save the setting. NOTE: With sessions set to 'No', the portal will cease to work since that is in the web context and the log-in functionality won't be able to give the user a session after logging in. UPDATE: We have installed Memcached to the server which hopefully fixes this problem but it has yet to be tested out. Memcached is running on the LIVE site only. See Using memcached for MODX Caching for details. Other Rebuild Project JSON Manager Page Inside the manager, there is a menu item located under the Extras top level, called Rebuild Project Data JSON. Clicking on this reveals a small message that says 'Project JSON Data Rebuilt'. Closer to the night of, we noticed a lot of traffic to the server which meant a lot of database calls. In an effort to reduce server load we decided to save out the JSON that gets returned to the Javascript via a call to '/event-map-api.js' (as described above). A problem we had was we didn't have a way to make changes to this json file should a change to one of the projects happen (resulting in old data in the json file). To fix this, we made a very simple Custom MODX Manager page that asked for the data and re-saved the json files accordingly. If you look in Settings-&gt;Namespaces you will see an entry projectjson whose files are stored in {core_path}components/projectJson/. If you open up these files on the server you will see a basic MODX controller {core_path}components/projectJson/controllers/default/index.class.php. This file may need updating year to year. An array is hardcoded in this file that has each type of json needed (one for each request possible). For each of these values, it runs the MODX snippet (getProjectsJson), passing along special parameters to return the exact data as if that page was calling it. It then rewrites the json file in the location also hard-coded in NOTE: You also have to change the getProjectsJson snippet itself to begin pulling from the JSON instead of requesting from the DB directly. We only set this up closer to the event to reduce a bit of load but most of the year it's fine to leave this feature off, since project data changes happen frequently througout the year. To have the snippet return JSON instead of accessing the DB, uncomment the code on lines 365-367 in the snippet: if(!$rebuildJson){ return file_get_contents($jsonPath); } The JSON files are located at SITE_ROOT/assets/projects/json/ PSP Portal Submission Portal Please refer to supplied Word Document for all usernames/passwords Setting Portal States Locate the file svn/SnbProject/release/core/Controller/Portal.php and choose between CLOSED, OPEN, REOPEN and LOCKED Activate Night of Mobile Site file: svn/Mobile/release/core/Service/Redirect.php line 22. comment out to disable mobile forwarding if (!self::isMobileDomain() &amp;&amp; !self::isDirty() &amp;&amp; self::getDetect()-&gt;isMobile() &amp;&amp; ($uri == &quot;/&quot;)) { self::redirectToWeb(); //self::redirectToMobile(); } Remove this line from Chunk Mobile_Common_Head &lt;meta http-equiv=&quot;refresh&quot; content=&quot;0; url=https://www.nbto.com/&quot; /&gt; Also in the mobile context Event Map page (ID 198), you need to check GPS in the template variable Web_Content_JS_Includes. NOTE: The mobile site also has some configurations (URLs, hosts, etc) in the MODX Manager -&gt; Settings -&gt; Contexts section. Right click on Mobile context and click Update Context. Flip over to the Context Settings tab and you will see all these settings listed here if you ever needed to change them. Files of Interest /svn/SnbProject/release/core/Snippet/Details.phpThis gets project details info for lists and the project details page. Some hardcoded info here like Exhibition name and Curator. protected $_zone_titles = array( 0 =&gt; '', 1 =&gt; '&lt;span class=&quot;curator-title&quot;&gt;&lt;span class=&quot;red&quot;&gt;Militant Nostalgia&lt;/span&gt; curated by Paco Barrag&amp;aacute;n&lt;/span&gt;', 2 =&gt; '&lt;span class=&quot;curator-title&quot;&gt;&lt;span class=&quot;red&quot;&gt;And the Transformation Reveals&lt;/span&gt; curated by Camille Hong Xin&lt;/span&gt;', 3 =&gt; '&lt;span class=&quot;curator-title&quot;&gt;&lt;span class=&quot;red&quot;&gt;Facing the Sky&lt;/span&gt; curated by Louise D&amp;eacute;ry&lt;/span&gt;', 4 =&gt; '&lt;span class=&quot;curator-title&quot;&gt;&lt;span class=&quot;red&quot;&gt;OBLIVION&lt;/span&gt; curated by Janine Marchessault and Michael Prokopow&lt;/span&gt;', ); /svn/SnbProject/release/core/Model/Project.php This is where fields appear for the artist portal. You can set max length and required values here as well as split it up for different types of projects. This is where you'll most likely do most of your edits. 'contact_info_contact_first_name' =&gt; array( 'maxlength' =&gt; 50, 'required' =&gt; false, 'type' =&gt; array( self::TYPE_INDEPENDENT =&gt; array( 'required' =&gt; true, ), self::TYPE_MAJOR_INSTITUTIONS =&gt; array( 'required' =&gt; true, ) ) ), Changing The Year / Adding New Users To set up the PSP to start a new year, there are a number of steps to complete. First you have to change the &quot;Year&quot; in the MODx manager System Settings. In the main navigation Dropdown, select Settings-&gt;System Settings Filter the settings to only show ‘snbproject’ Change the year to the correct year. Connect to the Database via HeidiSQL or any similar program of your choice. Backup the database for safety. We will need to remove all of the artist info and the projects themselves from the database. Run these two scripts: TRUNCATE snb_staging.modx_snbproject_fields; DELETE FROM snb_staging.modx_snbproject_projects WHERE year = PREVIOUS_YEAR; New users should be inserted into the modx_snbproject_projects table. There will be an Excel document provided by City of Toronto that list all the usernames needed and what category they belong to (Independent, Curated, etc). It is our task to create and provide the usernames with passwords and enter them into the database. Create passwords for each user. In the past we've used Norton Password Generator to generate the passwords. The settings we're set to 8 characters, with &quot;Include Punctuation&quot; checked off. Once you have generated the passwords needed and assigned them to the users in the Excel, we need to add them to the database. Ex: INSERT INTO snb_staging.modx_snbproject_projects (year, type_id, zone_id, name, user_name, user_password, created_at) VALUES ('2015', 23, 1, 'Michael Snow','Msnow','ch5kEVeX', UNIX_TIMESTAMP()); Assigning Project to Admin One of the weird quirks about the PSP is when you need to assign the original approver and group to one of the NB admins. To do this, we need to change the assigned_user_id and assigned_group_id in the modx_snbproject_fields table. The problem is, the PSP doesn't reliably create these fields for every project. Sometimes these fields are missing. We have had to create them for a few projects on occasion. Watch out for this! After you are sure the fields exist, you can run an SQL statement to assign it to the NB staff and group (find the IDs in the Users table) UPDATE modx_snbproject_fields SET value = {USER GROUP ID} WHERE name = assigned_group_id AND project_id = {PROJECT ID} UPDATE modx_snbproject_fields SET value = {USER ID} WHERE name = assigned_user_id AND project_id = {PROJECT ID} Copy Edits To add some edits for deadlines on the portal, it should be done using lexicon section on MODX. Settings-&gt;Lexicons. Choose snbproject for the Namespace. Edit any value you wish. You can change the Topic as well to get more results. After any change you must clear the MODX cache for changes to come into effect. Manage -&gt; Clear Cache. If you can't find the text you are looking for, they may be found in the actual lexicon folder in the code base: /var/www/www.scotiabanknuitblanche.ca/svn/SnbProject/release/core/lexicon/en /var/www/www.scotiabanknuitblanche.ca/svn/SnbShare/release/core/lexicon/en /var/www/www.scotiabanknuitblanche.ca/svn/Web/release/core/lexicon/en × Search results Close Documentation generated by JSDoc 3.4.2 on November 7th 2016, 10:19:29 am using the DocStrap template. "},"module-Data.html":{"id":"module-Data.html","title":"Module: Data","body":" Documentation Modules DataFiltersGalleryMapNavigationProgramPageReadMoreTilesNb.Main Global Module: Data The module for receiving response from the MODX website We only request to /event-map-api.js which fires a snippet that returns the data we need (based on page requesting) Requires module:Promise Methods &lt;static&gt; getProjects(page_id) Get the projects from the DB. Parameters: Name Type Description page_id int The current page id (hardcoded in HTML) Fires: event:makeRequest - requesting the data from the server Returns: projects - A promise that should have the projects JSON Object on an error if something failed. Type Object &lt;inner&gt; makeRequest(method, url, page_id) Makes a request to a server Parameters: Name Type Description method string The type of method (POST/GET) url string The URL to request page_id int The page id requesting the data Returns: projects - A promise that should have the projects JSON Object on an error if something failed. Type Object × Search results Close Documentation generated by JSDoc 3.4.2 on November 7th 2016, 10:19:29 am using the DocStrap template. "},"module-Filters.html":{"id":"module-Filters.html","title":"Module: Filters","body":" Documentation Modules DataFiltersGalleryMapNavigationProgramPageReadMoreTilesNb.Main Global Module: Filters Filters functionality for the Event Map page See: Event Map Page Requires module:Map module:array.includes Methods &lt;static&gt; initFilters() Grabs the neccessary HTML and inputs and assigns click events: filterContainer: the HTML element that has all the filter checkboxesAdds onclick event to this container (ex: any filter checkbox is clicked) inputs: an array of inputs (checkboxes) inside filterContainer activeFiltersContainer: div that holds the current filters selectedAdds onclick event to this container that removes the filter from the container as well as unchecks it in the dropdown above it Also activates onclick event for the 'select all' button in the filters dropdown. Fires: event:updateFilters - Every time a filter is selected/deselected or the select all button is pressed or a button inside the active filters div is pressed &lt;static&gt; updateTileFilters() Runs internal function updateTiles Fires: event:updateTiles &lt;inner&gt; matchFilter(labels) Runs a for loop on each element in the filters.active object. In each iteration it checks to see if that value is anywhere in the 'labels' string passed. Since we only need one match to show, it will return true immediatley after a match is found. Parameters: Name Type Description labels String The string of categories this project falls under Returns: If match is found (TRUE), if not (FALSE) Type Boolean &lt;inner&gt; updateFilterList(added, removed) If a filter is set to active, we need to show that in div (activeFiltersContainer). We create a button that displays highlighting tha filters are active. If a filter is being set to inactive, we need to remove this button from the HTML div and hide the div if no filters are active. Parameters: Name Type Description added Array The array of filters being set to active removed Array The array of filters being set to inactive &lt;inner&gt; updateFilters(value, ischeckAll) Takes the values passed in and moves that filter into the filters.active object if previously inactive or the filters.inactive object if previously active. If 'ischeckAll' is true, will move everything into the filters.active object. Fires all funcions listed below to modify the DOM to reflect these changes. Parameters: Name Type Default Description value Array An array of the filter value(s) that have been selected/unselected ischeckAll boolean false True/False if it came from the 'isCheckAll' button Fires: event:updateTiles event:updateMapMarkers event:updateFilterList &lt;inner&gt; updateMapMarkers() Gets all map markers and creates new Google maps bounds. If no filters are active we show all the markers. If not, this function shows/hides map markers based on filters.active object If found, marker gets added to the new Google Maps bounds and once all markers are checked a new bounds is created around only the visible markers. Fires: matchFilter - if active filters are more than 0,event: this function checks for a match. module:Map.event:getMarkers module:Map.event:reDrawMapBounds &lt;inner&gt; updateTiles() Grabs the list of tiles from the HTML (.project-list-tile). Removes the CSS classes last and even from the tile. If no filters are active, we show all tiles so we remove the hide class as well. If more than one filter, and the tile matches any active filters, we remove the hide class. If not, we add the hide class if it didn't exist already. Before we're finished we add the class 'last' to every fourth tile and the class 'eve' to every second tile (for CSS purposes) Fires: matchFilter - if active filters are more than 0,event: this function checks for a match. × Search results Close Documentation generated by JSDoc 3.4.2 on November 7th 2016, 10:19:29 am using the DocStrap template. "},"module-Gallery.html":{"id":"module-Gallery.html","title":"Module: Gallery","body":" Documentation Modules DataFiltersGalleryMapNavigationProgramPageReadMoreTilesNb.Main Global Module: Gallery The Gallery functionality See: Slick Slider for documentation. Requires module:slick Methods &lt;static&gt; initGallery() Init the functionality required for the ProgramPage. Fires: event:rendergallery &lt;inner&gt; playPauseSlick() Play/Pause functionality for the slick slider for the home page (for accessibility) &lt;inner&gt; rendergallery() Sets up the two gallery's needed with slick (Homepage main slider and home page gallery tile) × Search results Close Documentation generated by JSDoc 3.4.2 on November 7th 2016, 10:19:29 am using the DocStrap template. "},"module-Map.html":{"id":"module-Map.html","title":"Module: Map","body":" Documentation Modules DataFiltersGalleryMapNavigationProgramPageReadMoreTilesNb.Main Global Module: Map The Google Maps functionality Requires module:Google module:MarkerWithLabel Methods &lt;static&gt; drawLegend() Draws the legend for the desktop map page. Legend is hard-coded, and is placed in top-left corner. &lt;static&gt; getMap() Gets the contents of the variable map Returns: map - the Google maps object Type Object &lt;static&gt; getMarkers() Gets the contents of the variable markerList Returns: markerList - a list of all markers added to the map Type Object &lt;static&gt; init() Creates a new Google maps inside variable mapContainer Also creates an InfoWindow as well and adds a 'close click' event to it. &lt;static&gt; redrawMap() Takes the variable markerList and recreates a new LatLngBounds for the map based on which markers are visible (after filters are applied) See: Google Maps LatLng Documentation for more. &lt;static&gt; reDrawMapBounds(bounds) Re-draws map bounds based on bounds passed into the function. Parameters: Name Type Description bounds Object The Google maps bounds object See: Google Maps LatLng Documentation for more. &lt;static&gt; setMarkers(projects) Takes the JSON project data and one by one runs the setMarker function (after parsing filter array into a string) After the loop is finished it redraws the map bounds based on the markers in the map Parameters: Name Type Description projects Object The JSON object of the projects list Fires: event:setMarker - For each project &lt;static&gt; setSingleMarker(lat, lng) Sets a single marker on the google map will also center the map to this location. used for the details page on desktop. Parameters: Name Type Description lat string Latitude of the marker lng string Longitude of the marker &lt;inner&gt; setMarker(title, lat, lng, icon, filters, content, infoContent) sets an individual point (MarkerWithLabel) onto the Google map (variable map)Adds a click even to open the infowindow.Pushes marker into variable 'markerList'. Parameters: Name Type Description title string Title of the marker lat string Latitude of the marker lng string Longitude of the marker icon string Icon for the marker (either an img string or spacer img with HTML content) filters string string of filters to put into the marker class content string what appears inside the icon (if any) infoContent string HTML to appear in the pop-up when icon clicked. × Search results Close Documentation generated by JSDoc 3.4.2 on November 7th 2016, 10:19:29 am using the DocStrap template. "},"module-Navigation.html":{"id":"module-Navigation.html","title":"Module: Navigation","body":" Documentation Modules DataFiltersGalleryMapNavigationProgramPageReadMoreTilesNb.Main Global Module: Navigation The Navigation Functionality Requires module:jQuery Methods &lt;static&gt; initNavigation() Init the functionality required for the Navigation accessibility. See: This page for where source code was pulled. &lt;inner&gt; setup_navigation() jQuery extender class to call to set up the navigation accessibility functionality × Search results Close Documentation generated by JSDoc 3.4.2 on November 7th 2016, 10:19:30 am using the DocStrap template. "},"module-ProgramPage.html":{"id":"module-ProgramPage.html","title":"Module: ProgramPage","body":" Documentation Modules DataFiltersGalleryMapNavigationProgramPageReadMoreTilesNb.Main Global Module: ProgramPage The Event Map Desktop Page functionality. See: Event Map Page Requires module:Tiles module:Filters module:Map module:Data Methods &lt;static&gt; init() Init the functionality required for the ProgramPage. Gets the project data from Data Initializes the Filters module Initialized Maps.drawLegend Maps.setMarkers is fired after Data is present Fires: Filters.event:initFilters - Right away Maps.event:drawLegend - Right away event:setMapAndListViewClicks - Right away event:setFilterButtonClick - Right away Maps.event:setMarkers - after Data is provided ProgramPage.event:setProjects - after Data is provided &lt;static&gt; setProjects(data) Clones project data to allow mutation while keeping original intact. Parameters: Name Type Description data Object The JSON object of the projects list Returns: data - cloned JSON object of the projects list passed Type Object &lt;inner&gt; initTiles() Initialize the tile view on the Program Page. A timeout checks to see if the data exists before passing to the Tiles module. &lt;inner&gt; setFilterButtonClick() Sets the onclick event to handle the toggle between an open filters list and the closed state &lt;inner&gt; setMapAndListViewClicks() Sets the onclick event to handle the toggle between the Map View and the List View. The toggle works by adding/removing CSS classes to the respective buttons If the initTiles function has not been run yet, it will run. × Search results Close Documentation generated by JSDoc 3.4.2 on November 7th 2016, 10:19:30 am using the DocStrap template. "},"module-ReadMore.html":{"id":"module-ReadMore.html","title":"Module: ReadMore","body":" Documentation Modules DataFiltersGalleryMapNavigationProgramPageReadMoreTilesNb.Main Global Module: ReadMore The Read More functionality See: A curator landing page for an example. Requires module:jQuery Methods &lt;static&gt; initReadMore() Init the functionality required for the Read More button on Curator Landing pages. Switches 'Read More' to 'Read Less' on click. Changes icon respectively. × Search results Close Documentation generated by JSDoc 3.4.2 on November 7th 2016, 10:19:30 am using the DocStrap template. "},"module-Tiles.html":{"id":"module-Tiles.html","title":"Module: Tiles","body":" Documentation Modules DataFiltersGalleryMapNavigationProgramPageReadMoreTilesNb.Main Global Module: Tiles The Tiles View Module See: See an example Requires module:Data Methods &lt;static&gt; createTiles(projects) Takes each project in the project JSON and creates an HTML 'tile' out of the data. Tiles include the project image, title, artist and location. Each text field is cut off at certain character limits to avoid differen't height tiles. Also links to the project details Sets CSS classes for 'even' tiles as well as 'last (in row)' tiles for CSS purposes Tiles also have project-type data attribute for filtering purposes. If container div is not found on the page, one is created at the bottom of the content div. Parameters: Name Type Description projects Object The JSON object of the projects list &lt;static&gt; init() Makes a request to the Data module to grab project data. then runs the createTiles function. Fires: module:Data.event:getProjects module:Tiles.event:createTiles - Once we get data returned from Promise × Search results Close Documentation generated by JSDoc 3.4.2 on November 7th 2016, 10:19:30 am using the DocStrap template. "},"Nb.module_Main.html":{"id":"Nb.module_Main.html","title":"Module: Main","body":" Documentation Modules DataFiltersGalleryMapNavigationProgramPageReadMoreTilesNb.Main Global Module: Main The Main Desktop Controller This works by paring a variable called jsNeeded (coming from the HTML) object and running the scripts based on what is needed for that page. Each page will have a different value for the variable jsNeeded and for the variable page_id hardcoded in the &lt;head&gt; tag of the document. Example // Will run ReadMore and Tiles functionality var page_id = 256; var jsNeeded = {&quot;tiles&quot;:true,&quot;readmore&quot;:true}; Requires module:Navigation module:ProgramPage module:Map module:Tiles module:Gallery module:ReadMore × Search results Close Documentation generated by JSDoc 3.4.2 on November 7th 2016, 10:19:30 am using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
